# План изменения дизайна страницы

## Дата создания: 16.11.2025

---

## Пункт 1: Разобраться с текущим отображением

### Задачи:
- [ ] Запустить dev-сервер и проверить текущее отображение
- [ ] Изучить существующие стили и компоненты
- [ ] Проанализировать текущую структуру styled-components
- [ ] Проверить адаптивность на разных экранах

### Текущая структура:
- Основной компонент: `src/components/Main/Main.tsx`
- Стили: `src/assets/customStyled.js`
- Глобальные стили: `src/app/globals.css`
- Медиа-запросы: `src/styles/media.js`

---

## Пункт 2: Доработать систему тем (светлая/темная)

### 2.1 Создать ThemeContext

**Задачи:**
- [ ] Создать файл `src/context/ThemeContext.tsx`
- [ ] Реализовать хук `useTheme`
- [ ] Добавить ThemeProvider в layout

**Функционал:**
- Управление состоянием темы (light/dark/system)
- Методы для переключения темы
- Экспорт хука для использования в компонентах

---

### 2.2 Определить цветовую палитру

**Задачи:**
- [ ] Создать файл `src/styles/theme.ts`
- [ ] Определить цвета для светлой темы
- [ ] Определить цвета для темной темы
- [ ] Определить типографику и размеры

**Цветовая схема:**

#### Светлая тема:
```typescript
{
  background: '#ffffff',
  foreground: '#171717',
  primary: '#000000',
  secondary: '#666666',
  accent: '#0066cc',
  border: '#e5e5e5',
  buttonBg: '#000000',
  buttonText: '#ffffff',
  buttonHoverBg: 'rgba(0, 0, 0, 0.85)',
}
```

#### Темная тема:
```typescript
{
  background: '#0a0a0a',
  foreground: '#ededed',
  primary: '#ffffff',
  secondary: '#a0a0a0',
  accent: '#3399ff',
  border: '#333333',
  buttonBg: '#ffffff',
  buttonText: '#000000',
  buttonHoverBg: 'rgba(255, 255, 255, 0.85)',
}
```

---

### 2.3 Создать компонент переключателя темы

**Задачи:**
- [ ] Создать компонент `src/components/ThemeToggle/ThemeToggle.tsx`
- [ ] Добавить стили для переключателя
- [ ] Реализовать анимацию переключения
- [ ] Добавить иконки (солнце/луна)

**Требования:**
- Кнопка должна показывать текущую тему
- Плавная анимация при переключении
- Адаптивный дизайн
- Доступность (aria-labels)

---

### 2.4 Реализовать определение темы браузера

**Задачи:**
- [ ] Добавить определение `prefers-color-scheme` при загрузке
- [ ] Добавить слушатель изменения темы браузера
- [ ] Реализовать приоритет: localStorage > browser preference > default

**Логика приоритетов:**
1. Если есть сохраненная тема в localStorage - использовать её
2. Если нет - определить тему браузера через `window.matchMedia('(prefers-color-scheme: dark)')`
3. По умолчанию - светлая тема

---

### 2.5 Обновить styled-components

**Задачи:**
- [ ] Обновить `src/assets/customStyled.js` для использования темы
- [ ] Добавить ThemeProvider из styled-components
- [ ] Переписать все компоненты с использованием theme props
- [ ] Удалить хардкод цветов

**Компоненты для обновления:**
- Container
- Title
- SecondaryTitle
- SubTitle
- Button
- StyledLink
- shadow

---

### 2.6 Добавить сохранение в localStorage

**Задачи:**
- [ ] Реализовать сохранение выбранной темы
- [ ] Реализовать загрузку темы при инициализации
- [ ] Добавить обработку ошибок
- [ ] Предотвратить мигание при загрузке (FOUC)

**Ключи localStorage:**
- `theme` - значения: 'light' | 'dark' | 'system'

---

### 2.7 Предотвратить FOUC (Flash of Unstyled Content)

**Задачи:**
- [ ] Добавить inline script в layout для предзагрузки темы
- [ ] Установить начальную тему до рендеринга React
- [ ] Добавить data-атрибут на html элемент

---

### 2.8 Протестировать функционал

**Тестовые сценарии:**
- [ ] Переключение темы по кнопке работает корректно
- [ ] Тема сохраняется в localStorage
- [ ] Тема восстанавливается после перезагрузки страницы
- [ ] Определяется тема браузера при первом посещении
- [ ] Тема меняется при изменении настроек браузера (если выбрана system)
- [ ] Нет мигания при загрузке страницы
- [ ] Все цвета корректно отображаются в обеих темах
- [ ] Адаптивность работает на всех экранах
- [ ] Переходы и анимации работают плавно

---

## Технические детали

### Зависимости:
- styled-components: ^6.1.19 ✓ (уже установлен)
- next: 16.0.3 ✓ (уже установлен)
- react: 19.2.0 ✓ (уже установлен)

### Новые файлы:
1. `src/context/ThemeContext.tsx` - контекст темы
2. `src/styles/theme.ts` - определение тем
3. `src/components/ThemeToggle/ThemeToggle.tsx` - переключатель
4. `src/components/ThemeToggle/ThemeToggle.styled.ts` - стили переключателя
5. `src/hooks/useTheme.ts` - хук для использования темы (опционально)

### Файлы для изменения:
1. `src/app/layout.tsx` - добавить ThemeProvider
2. `src/assets/customStyled.js` - обновить для использования темы
3. `src/app/globals.css` - обновить CSS переменные

---

## Порядок выполнения:

1. ✅ Составить план
2. ⏳ Запустить приложение и изучить текущее состояние
3. ⏳ Создать структуру тем (theme.ts)
4. ⏳ Создать ThemeContext
5. ⏳ Обновить styled-components
6. ⏳ Создать компонент переключателя
7. ⏳ Добавить определение темы браузера
8. ⏳ Добавить сохранение в localStorage
9. ⏳ Предотвратить FOUC
10. ⏳ Тестирование
11. ⏳ Финальная проверка и коммит

---

## Примечания:
- Сохранить существующую функциональность
- Обеспечить плавные переходы между темами
- Учесть accessibility (доступность)
- Протестировать на разных браузерах
